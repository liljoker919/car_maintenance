<!-- edit_registration_modal.html -->
<div class="modal fade" id="editRegistrationModal{{ registration.id }}" tabindex="-1"
    aria-labelledby="editRegistrationModalLabel{{ registration.id }}" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <form method="post" action="{% url 'compliance:registration_edit' registration.id %}">
                {% csrf_token %}
                <div class="modal-header">
                    <h5 class="modal-title" id="editRegistrationModalLabel{{ registration.id }}">Edit Registration</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    {% if form.errors %}
                    <div class="alert alert-danger">Please correct the errors below.</div>
                    {% endif %}
                    <div class="mb-3">
                        <label for="vehicle-{{ registration.id }}" class="form-label">Vehicle</label>
                        <input type="hidden" name="vehicle" value="{{ registration.vehicle.id }}">
                        <input type="text" class="form-control" id="vehicle-{{ registration.id }}" 
                            value="{{ registration.vehicle }}" readonly>
                    </div>
                    <div class="mb-3">
                        <label for="registration_number-{{ registration.id }}" class="form-label">Registration Number</label>
                        <input type="text" class="form-control" id="registration_number-{{ registration.id }}" name="registration_number"
                            value="{{ registration.registration_number }}" required>
                    </div>
                    <div class="mb-3">
                        <label for="state-{{ registration.id }}" class="form-label">State</label>
                        <select class="form-select" id="state-{{ registration.id }}" name="state" required>
                            <option value="AL" {% if registration.state == 'AL' %}selected{% endif %}>Alabama</option>
                            <option value="AK" {% if registration.state == 'AK' %}selected{% endif %}>Alaska</option>
                            <option value="AZ" {% if registration.state == 'AZ' %}selected{% endif %}>Arizona</option>
                            <option value="AR" {% if registration.state == 'AR' %}selected{% endif %}>Arkansas</option>
                            <option value="CA" {% if registration.state == 'CA' %}selected{% endif %}>California</option>
                            <option value="CO" {% if registration.state == 'CO' %}selected{% endif %}>Colorado</option>
                            <option value="CT" {% if registration.state == 'CT' %}selected{% endif %}>Connecticut</option>
                            <option value="DE" {% if registration.state == 'DE' %}selected{% endif %}>Delaware</option>
                            <option value="FL" {% if registration.state == 'FL' %}selected{% endif %}>Florida</option>
                            <option value="GA" {% if registration.state == 'GA' %}selected{% endif %}>Georgia</option>
                            <option value="HI" {% if registration.state == 'HI' %}selected{% endif %}>Hawaii</option>
                            <option value="ID" {% if registration.state == 'ID' %}selected{% endif %}>Idaho</option>
                            <option value="IL" {% if registration.state == 'IL' %}selected{% endif %}>Illinois</option>
                            <option value="IN" {% if registration.state == 'IN' %}selected{% endif %}>Indiana</option>
                            <option value="IA" {% if registration.state == 'IA' %}selected{% endif %}>Iowa</option>
                            <option value="KS" {% if registration.state == 'KS' %}selected{% endif %}>Kansas</option>
                            <option value="KY" {% if registration.state == 'KY' %}selected{% endif %}>Kentucky</option>
                            <option value="LA" {% if registration.state == 'LA' %}selected{% endif %}>Louisiana</option>
                            <option value="ME" {% if registration.state == 'ME' %}selected{% endif %}>Maine</option>
                            <option value="MD" {% if registration.state == 'MD' %}selected{% endif %}>Maryland</option>
                            <option value="MA" {% if registration.state == 'MA' %}selected{% endif %}>Massachusetts</option>
                            <option value="MI" {% if registration.state == 'MI' %}selected{% endif %}>Michigan</option>
                            <option value="MN" {% if registration.state == 'MN' %}selected{% endif %}>Minnesota</option>
                            <option value="MS" {% if registration.state == 'MS' %}selected{% endif %}>Mississippi</option>
                            <option value="MO" {% if registration.state == 'MO' %}selected{% endif %}>Missouri</option>
                            <option value="MT" {% if registration.state == 'MT' %}selected{% endif %}>Montana</option>
                            <option value="NE" {% if registration.state == 'NE' %}selected{% endif %}>Nebraska</option>
                            <option value="NV" {% if registration.state == 'NV' %}selected{% endif %}>Nevada</option>
                            <option value="NH" {% if registration.state == 'NH' %}selected{% endif %}>New Hampshire</option>
                            <option value="NJ" {% if registration.state == 'NJ' %}selected{% endif %}>New Jersey</option>
                            <option value="NM" {% if registration.state == 'NM' %}selected{% endif %}>New Mexico</option>
                            <option value="NY" {% if registration.state == 'NY' %}selected{% endif %}>New York</option>
                            <option value="NC" {% if registration.state == 'NC' %}selected{% endif %}>North Carolina</option>
                            <option value="ND" {% if registration.state == 'ND' %}selected{% endif %}>North Dakota</option>
                            <option value="OH" {% if registration.state == 'OH' %}selected{% endif %}>Ohio</option>
                            <option value="OK" {% if registration.state == 'OK' %}selected{% endif %}>Oklahoma</option>
                            <option value="OR" {% if registration.state == 'OR' %}selected{% endif %}>Oregon</option>
                            <option value="PA" {% if registration.state == 'PA' %}selected{% endif %}>Pennsylvania</option>
                            <option value="RI" {% if registration.state == 'RI' %}selected{% endif %}>Rhode Island</option>
                            <option value="SC" {% if registration.state == 'SC' %}selected{% endif %}>South Carolina</option>
                            <option value="SD" {% if registration.state == 'SD' %}selected{% endif %}>South Dakota</option>
                            <option value="TN" {% if registration.state == 'TN' %}selected{% endif %}>Tennessee</option>
                            <option value="TX" {% if registration.state == 'TX' %}selected{% endif %}>Texas</option>
                            <option value="UT" {% if registration.state == 'UT' %}selected{% endif %}>Utah</option>
                            <option value="VT" {% if registration.state == 'VT' %}selected{% endif %}>Vermont</option>
                            <option value="VA" {% if registration.state == 'VA' %}selected{% endif %}>Virginia</option>
                            <option value="WA" {% if registration.state == 'WA' %}selected{% endif %}>Washington</option>
                            <option value="WV" {% if registration.state == 'WV' %}selected{% endif %}>West Virginia</option>
                            <option value="WI" {% if registration.state == 'WI' %}selected{% endif %}>Wisconsin</option>
                            <option value="WY" {% if registration.state == 'WY' %}selected{% endif %}>Wyoming</option>
                            <option value="DC" {% if registration.state == 'DC' %}selected{% endif %}>District of Columbia</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="registration_date-{{ registration.id }}" class="form-label">Registration Date</label>
                        <input type="date" class="form-control" id="registration_date-{{ registration.id }}" name="registration_date"
                            value="{{ registration.registration_date|date:'Y-m-d' }}" required>
                    </div>
                    <div class="mb-3">
                        <label for="expiration_date-{{ registration.id }}" class="form-label">Expiration Date</label>
                        <input type="date" class="form-control" id="expiration_date-{{ registration.id }}" name="expiration_date"
                            value="{{ registration.expiration_date|date:'Y-m-d' }}" required>
                    </div>
                    <div class="mb-3">
                        <label for="inspection_due_date-{{ registration.id }}" class="form-label">Inspection Due Date</label>
                        <input type="date" class="form-control" id="inspection_due_date-{{ registration.id }}" name="inspection_due_date"
                            value="{{ registration.inspection_due_date|date:'Y-m-d'|default:'' }}">
                    </div>
                    <div class="mb-3">
                        <label for="inspection_completed_date-{{ registration.id }}" class="form-label">Inspection Completed Date</label>
                        <input type="date" class="form-control" id="inspection_completed_date-{{ registration.id }}" name="inspection_completed_date"
                            value="{{ registration.inspection_completed_date|date:'Y-m-d'|default:'' }}">
                    </div>
                    <div class="mb-3">
                        <label for="notes-{{ registration.id }}" class="form-label">Notes</label>
                        <textarea class="form-control" id="notes-{{ registration.id }}" name="notes" rows="3">{{ registration.notes|default:'' }}</textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Update Registration</button>
                </div>
            </form>
        </div>
    </div>
</div>